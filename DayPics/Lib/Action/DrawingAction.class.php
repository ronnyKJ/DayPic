<?phpclass DrawingAction extends Action{	// 首页	public function index(){		import("@.Action.MyPublicAction");		if(MyPublicAction::getBrowserType() != "Google Chrome")		{			$this->redirect('MyPublic/index');		}		$draw_form = D("drawing");		//$cate_list = $draw_form -> query("SELECT DISTINCT folder, foldername FROM drawing;");		//$this->assign("cate_list", $cate_list);		$img_list = $draw_form -> order("folder") -> findAll();		$this->assign("img_list", $img_list);		$this->display();	}	// 数据同步	var $path = "otherPics/drawing/";	public function dirOfDrawing(){		$this->scanfile($this->path);		$this->display();	}		private function scanfile($handle)	{		$draw_form = D("drawing");		//打开 drawing 目录		$dir = opendir($handle);		//列出 pics 目录中的文件		while (($file = readdir($dir)) !== false)		{			if($file!='.' && $file != '..')			{				if(is_file($handle.$file))				{					//echo "----".$file."<br />";					$img["imgname"] = $file;					$arr = explode("/", $handle);					$img["folder"] = $arr[2];					$draw_form->add($img);				}				else				{					//echo $file."<br />";					$this->scanfile($handle.$file."/");				}							}		}		closedir($dir);	}}?>